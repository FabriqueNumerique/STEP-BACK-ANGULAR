<div *ngIf="models.length != 0" style="margin:5%;">
    <mat-accordion >
        <mat-expansion-panel (opened)="panelOpenState = true"
                             (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <h1>Liste des composants</h1>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="row">
                <div class="col"><h3>Name</h3></div>
                <div class="col"><h3>Actions</h3></div>
            </div>
            <mat-divider></mat-divider>
            <div class="row" *ngFor="let model of models, let i=index">
                <div class="col"><h3>{{model.title}}</h3></div>
                <div class="col">
                    <button mat-icon-button >
                        <mat-icon color="accent" matTooltip="supprimer">delete</mat-icon>
                    </button>
                </div>
            </div>
            <mat-divider></mat-divider>
        </mat-expansion-panel>
    </mat-accordion>
</div>




<div [class.mat-elevation-z5]="isAdd" class="col dialogue">
    <h1>Ajouter un composant</h1>
    <div>
        <h2>Séléctionner le type du composant </h2>
        <select 
            class="form-select step-yellow" 
            [disabled]="!isSelected" 
            (change)="onSelect()" [(ngModel)]="name_component">
            <option selected hidden></option>
            <option *ngFor="let option of options" value={{option}}>{{option | titlecase}}</option>
        </select>
    </div>
    <hr>
    
    <div>
        <h2>Séléctionner un champ pour le composant</h2>
    </div>
    <div >
        <div class="button-icon">
            <button (click)="generateInput('input','text')" class="step-yellow" mat-button [disabled]="name_component==='' || isValidate"><mat-icon>title</mat-icon> Text</button>
            <button (click)="generateInput('input','email')" class="step-yellow" mat-button [disabled]="name_component==='' || isValidate"><mat-icon>email</mat-icon> Email</button>
            <button (click)="generateInput('input','number')" class="step-yellow" mat-button [disabled]="name_component==='' || isValidate"><mat-icon>pin</mat-icon> Number</button>
        </div>
        <div class="button-icon">
            <button (click)="generateInput('input','date')" class="step-yellow" mat-button [disabled]="name_component==='' || isValidate"><mat-icon>date_range</mat-icon> Date</button>
            <button (click)="generateInput('input','file')" class="step-yellow" mat-button [disabled]="name_component==='' || isValidate"><mat-icon>image</mat-icon> Image</button>
            <button (click)="generateInput('input','boolean')" class="step-yellow" mat-button [disabled]="name_component==='' || isValidate"><mat-icon>radio_button_checked</mat-icon> Booléen</button>
        </div>
        <div class="button-icon">
            <button (click)="generateInput('textarea','textarea')" class="step-yellow" mat-button [disabled]="name_component==='' || isValidate"><mat-icon>notes</mat-icon>Text Area</button>
        </div>
    </div>

    <div>
    </div>
    <hr>

    <h2>Ajouter un champ</h2>
    <div class="button-icon">
        <h4>Type du champ: <span class="success mb-2">{{field_type}}</span></h4>
        <input style="padding:10px;" type="text" placeholder="Saisir le nom du champ" class="form-control typeField mb-2" [(ngModel)]="name_field" [disabled]="field_type === ''">
        <div class="d-flex align-items-center mb-2">
            <input 
                [(ngModel)]="isChecked" 
                [disabled]="name_field===''" 
                type="checkbox" 
                name="requis" id="requis" style="margin-right: 10px; width:20px; height:20px">
            <label for="requis">Champ requis?</label>
        </div>
        <button [disabled]="name_field===''" mat-raised-button class="success mb-2" (click)="addField()">Valider</button>
    </div>

    <div *ngIf="fields.length>0">
        <mat-divider></mat-divider>
        <div class="row my-1">
            <div class="col">
                <h4 style="font-weight: bolder;">Nom du champ</h4>
            </div>
            <div class="col">
                <h4 style="font-weight: bolder;">Type du champ</h4>
            </div>
            <div class="col">
                <h4 style="font-weight: bolder;">Champ requis</h4>
            </div>
            <div class="col">
                <h4 style="font-weight: bolder;">Actions</h4>
            </div>
        </div>
        <mat-divider></mat-divider>
        <div *ngFor="let field of fields; let i = index" class="row my-1 ">
            <div class="col">
                <h4>{{field.templateOptions.label}}</h4>
            </div>
            <div class="col">
                <h4>{{field.key}}</h4>
            </div>
            <div class="col">
                <h4>{{field.templateOptions.required}}</h4>
            </div>
            <div class="col">
                <button mat-mini-fab (click)="deleteChamp(i)">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </div>
    </div>
    <mat-divider></mat-divider>
    <div class="d-flex justify-content-between mt-2 flex-wrap">
        <button class="m-1"  mat-raised-button color="accent" (click)="cancel()">Annuler</button>
        <button class="m-1" [disabled]="!isValidate" mat-raised-button color="primary" (click)="addAnotherField()">Ajouter un nouveau champ</button>
        <button class="m-1 success" [disabled]="!isValidate || fields.length===0"  mat-raised-button (click)="saveModel()">Enregistre le model</button>
    </div>
</div>






    



